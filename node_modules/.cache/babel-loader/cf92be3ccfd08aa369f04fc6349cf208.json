{"ast":null,"code":"import _taggedTemplateLiteral from\"/Users/ganlintian/Desktop/ML/frontend/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";import _slicedToArray from\"/Users/ganlintian/Desktop/ML/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray\";var _templateObject;import React,{useState,useEffect}from'react';import{Link,useHistory}from'react-router-dom';import Plot from'react-plotly.js';// Loading spinner library\nimport HashLoader from\"react-spinners/HashLoader\";import ClockLoader from\"react-spinners/ClockLoader\";import{css}from\"@emotion/react\";import'./Explore.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Explore=function Explore(){var _useState=useState(\"initial_page\"),_useState2=_slicedToArray(_useState,2),display=_useState2[0],setDisplay=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),graphOne=_useState4[0],setGraphOne=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),mappy=_useState6[0],setMappy=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),loadingInitial=_useState8[0],setLoadingInitial=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),loadingResult=_useState10[0],setLoadingResult=_useState10[1];var _useState11=useState(undefined),_useState12=_slicedToArray(_useState11,2),resultData=_useState12[0],setResultData=_useState12[1];var _useState13=useState(\"#8EB93B\"),_useState14=_slicedToArray(_useState13,2),loadColor=_useState14[0],setLoadColor=_useState14[1];var override=css(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n        display: block;\\n        margin: 0 auto;\\n        border-color: red;\\n    \"])));useEffect(function(){setDisplay(\"initial_page\");setLoadingInitial(true);getData();},[]);// Display the intial page, fetch the map/table's data and store it\nvar getData=function getData(){setLoadingResult(true);fetch(\"/all_index\").then(function(res){return res.json();}).then(function(data){setGraphOne(JSON.parse(data.graphOne));setMappy(JSON.parse(data.mappy));setLoadingInitial(false);});};// Onclick function when user submit the form\nvar getResult=function getResult(){// Change the page's display\nsetDisplay(\"result_page\");// fetch the data using \"Post\" and the form, store it\nfetch(\"/overview\",{method:\"POST\",body:new FormData(document.getElementById(\"explore_form\"))}).then(function(res){return res.json();}).then(function(data){setResultData(data);setLoadingResult(false);});};// Create an initial variable to store the map plot\nvar plot=null;if(graphOne!==null){plot=/*#__PURE__*/_jsx(Plot,{data:graphOne.data,layout:graphOne.layout});}// Disable the form from posting when hit \"submit\"\nvar handleSubmit=function handleSubmit(event){event.preventDefault();};// Create an initial variable to store the content\nvar content=null;// Page content will change based on the display's state\nif(display===\"initial_page\"){content=/*#__PURE__*/_jsxs(\"div\",{children:[!loadingInitial&&/*#__PURE__*/_jsxs(\"div\",{className:\"form-container\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Explore\"}),/*#__PURE__*/_jsxs(\"form\",{id:\"explore_form\",method:\"POST\",action:\"/overview\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"data\",children:\"Details of a specific Azure region's WattTime balancing authority:\"}),/*#__PURE__*/_jsxs(\"select\",{className:\"form-control\",name:\"data\",id:\"data\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"nada\",children:\"  \"}),/*#__PURE__*/_jsx(\"option\",{value:\"PJM Roanoke\",children:\"East US\"}),/*#__PURE__*/_jsx(\"option\",{value:\"PJM DC\",children:\"East US 2\"}),/*#__PURE__*/_jsx(\"option\",{value:\"PJM DC\",children:\"East US 2 EUAP\"}),/*#__PURE__*/_jsx(\"option\",{value:\"ERCOT San Antonio\",children:\"South Central US\"}),/*#__PURE__*/_jsx(\"option\",{value:\"PUD No 2 of Grant County\",children:\"West US 2\"}),/*#__PURE__*/_jsx(\"option\",{value:\"National Electricity Market (Australia)\",children:\"Australia Central\"}),/*#__PURE__*/_jsx(\"option\",{value:\"National Electricity Market (Australia)\",children:\"Australia Central 2\"}),/*#__PURE__*/_jsx(\"option\",{value:\"National Electricity Market (Australia)\",children:\"Australia East\"}),/*#__PURE__*/_jsx(\"option\",{value:\"National Electricity Market (Australia)\",children:\"Australia Southeast\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Ireland\",children:\"North Europe\"}),/*#__PURE__*/_jsx(\"option\",{value:\"United Kingdom\",children:\"UK South\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Netherlands\",children:\"West Europe\"}),/*#__PURE__*/_jsx(\"option\",{value:\"MISO Madison City\",children:\"Central US EUAP\"}),/*#__PURE__*/_jsx(\"option\",{value:\"MISO Madison City\",children:\"Central US\"}),/*#__PURE__*/_jsx(\"option\",{value:\"PJM Chicago\",children:\"North Central US\"}),/*#__PURE__*/_jsx(\"option\",{value:\"California ISO Northern\",children:\"West US\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Independent Electricity System Operator (Ontario)\",children:\"Canada Central\"}),/*#__PURE__*/_jsx(\"option\",{value:\"France\",children:\"France South\"}),/*#__PURE__*/_jsx(\"option\",{value:\"France\",children:\"France Central\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Hydro Quebec\",children:\"Canada East\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Germany and Luxembourg\",children:\"Germany West Central\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Germany and Luxembourg\",children:\"Germany North\"}),/*#__PURE__*/_jsx(\"option\",{value:\"PacifiCorp East\",children:\"West Central US\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Arizona Public Service Co\",children:\"West US 3\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Norway\",children:\"Norway West\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Norway\",children:\"Norway East\"})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{className:\"findButton btn-success btn\",value:\"See Region Emission History\",type:\"submit\",onClick:function onClick(){getResult();}})]})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"br\",{})}),/*#__PURE__*/_jsx(\"div\",{className:\"intensity-table\"}),/*#__PURE__*/_jsx(\"div\",{id:\"map-plot\",children:loadingInitial?/*#__PURE__*/_jsxs(\"div\",{className:\"loading\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"extra-space\",children:/*#__PURE__*/_jsx(\"br\",{})}),/*#__PURE__*/_jsx(HashLoader,{color:loadColor,css:override,size:150}),/*#__PURE__*/_jsx(\"p\",{className:\"loading-title\",children:\"Hang in there!\"}),/*#__PURE__*/_jsx(\"p\",{className:\"loading-desc\",children:\"We are trying to load the page, this might take a while...\"}),/*#__PURE__*/_jsx(\"p\",{className:\"loading-desc\",children:\"Rome wasn't built in a day\"})]}):plot})]});// Result page content\n}else if(display===\"result_page\"){// Create the result content \nvar result=null;// If the result data isn't null\nif(resultData!=null){// If the returned data is an error message\nif(resultData.type===\"error\"){// Create intial variables to store the error information\nvar errorMsg=resultData.errorMsg;var errorCode=resultData.errorCode;// Return the error message display \nresult=/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{children:errorMsg}),/*#__PURE__*/_jsx(\"p\",{children:errorCode})]});// Else display the result \n}else{if(resultData.type===\"region\"||resultData.type===\"region_bad_freq\"){// Create initial varaibles to store the needed information\nvar plotOne=JSON.parse(resultData.plot1);var plotTwo=JSON.parse(resultData.plot2);var plotThree=null;var plotThreeDisplay=null;var titleOne=\"\";var titleTwo=\"\";var titleThree=\"\";var warningMsg=null;// Rename the title based on the returned data type's name\nif(resultData.type===\"region\"||resultData.type===\"region_2\"){titleOne=\"Last 24 Hours:\";titleTwo=\"Last 7 Days:\";if(resultData.type===\"region\"){titleThree=\"Last 30 Days:\";}}else{titleOne=\"Past Day:\";titleTwo=\"Past Week:\";warningMsg=/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"***Notice***\"}),\" WattTime data frequency is greater than 5min. Frequency is \",resultData.msg,\"s \"]});if(resultData.type===\"region_bad_freq\"){titleThree=\"Past Month:\";}}// If the data returned type has 3 plots\nif(resultData.type===\"region\"||resultData.type===\"region_bad_freq\"){// Store the third plot's data and create a plot \nplotThree=JSON.parse(resultData.plot3);plotThreeDisplay=/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"p\",{children:titleThree}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Average MOER: \",/*#__PURE__*/_jsxs(\"span\",{children:[resultData.display_data.avg_month,/*#__PURE__*/_jsx(\"sup\",{children:\"lbs\"}),\"\\u2044\",/*#__PURE__*/_jsx(\"sub\",{children:\"MWh\"})]})]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Percentage of Time at 0g of Carbon: \",/*#__PURE__*/_jsxs(\"span\",{children:[resultData.display_data.month,\"%\"]})]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Number of Times at 0g of Carbon: \",/*#__PURE__*/_jsxs(\"span\",{children:[resultData.display_data.num_month_0,/*#__PURE__*/_jsx(\"sup\",{}),\"\\u2044\",/*#__PURE__*/_jsx(\"sub\",{children:\"day\"})]})]}),/*#__PURE__*/_jsx(Plot,{data:plotThree.data,layout:plotThree.layout})]});}result=/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"Balancing Authority: \",/*#__PURE__*/_jsx(\"span\",{children:resultData.display_data.name})]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Real Time Emissions: \",/*#__PURE__*/_jsxs(\"span\",{children:[resultData.display_data.moer_value,/*#__PURE__*/_jsx(\"sup\",{children:\"lbs\"}),\"\\u2044\",/*#__PURE__*/_jsx(\"sub\",{children:\"MWh\"})]})]}),/*#__PURE__*/_jsx(\"p\",{children:warningMsg}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"p\",{children:titleOne}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Average MOER: \",/*#__PURE__*/_jsxs(\"span\",{children:[resultData.display_data.avg_day,/*#__PURE__*/_jsx(\"sup\",{children:\"lbs\"}),\"\\u2044\",/*#__PURE__*/_jsx(\"sub\",{children:\"MWh\"})]})]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Percentage of Time at 0g of Carbon: \",/*#__PURE__*/_jsxs(\"span\",{children:[resultData.display_data.day,\"%\"]})]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Number of Times at 0g of Carbon: \",/*#__PURE__*/_jsxs(\"span\",{children:[resultData.display_data.num_day_0,/*#__PURE__*/_jsx(\"sup\",{}),\"\\u2044\",/*#__PURE__*/_jsx(\"sub\",{children:\"day\"})]})]}),/*#__PURE__*/_jsx(Plot,{data:plotOne.data,layout:plotOne.layout})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"p\",{children:titleTwo}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Average MOER: \",/*#__PURE__*/_jsxs(\"span\",{children:[resultData.display_data.avg_week,/*#__PURE__*/_jsx(\"sup\",{children:\"lbs\"}),\"\\u2044\",/*#__PURE__*/_jsx(\"sub\",{children:\"MWh\"})]})]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Percentage of Time at 0g of Carbon: \",/*#__PURE__*/_jsxs(\"span\",{children:[resultData.display_data.week,\"%\"]})]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Number of Times at 0g of Carbon: \",/*#__PURE__*/_jsxs(\"span\",{children:[resultData.display_data.num_week_0,/*#__PURE__*/_jsx(\"sup\",{}),\"\\u2044\",/*#__PURE__*/_jsx(\"sub\",{children:\"day\"})]})]}),/*#__PURE__*/_jsx(Plot,{data:plotTwo.data,layout:plotTwo.layout})]}),plotThreeDisplay]});// In case something went wrong, display error message manually\n}else{result=/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"p\",{children:\"Sorry, somthing went wrong\"})});}}}content=/*#__PURE__*/_jsx(\"div\",{children:loadingResult?/*#__PURE__*/_jsxs(\"div\",{className:\"loading\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"extra-space\",children:/*#__PURE__*/_jsx(\"br\",{})}),/*#__PURE__*/_jsx(ClockLoader,{color:loadColor,css:override,size:150}),/*#__PURE__*/_jsx(\"p\",{className:\"loading-title\",children:\"Trying to find the emission history\"}),/*#__PURE__*/_jsx(\"p\",{className:\"loading-desc\",children:\"This might take a few seconds, a watched pot never boils!\"})]}):/*#__PURE__*/_jsx(\"div\",{children:result})});}// Return the Explore page\nreturn/*#__PURE__*/_jsx(\"div\",{children:content});};export default Explore;","map":{"version":3,"sources":["/Users/ganlintian/Desktop/ML/frontend/src/pages/explore/Explore.js"],"names":["React","useState","useEffect","Link","useHistory","Plot","HashLoader","ClockLoader","css","Explore","display","setDisplay","graphOne","setGraphOne","mappy","setMappy","loadingInitial","setLoadingInitial","loadingResult","setLoadingResult","undefined","resultData","setResultData","loadColor","setLoadColor","override","getData","fetch","then","res","json","data","JSON","parse","getResult","method","body","FormData","document","getElementById","plot","layout","handleSubmit","event","preventDefault","content","result","type","errorMsg","errorCode","plotOne","plot1","plotTwo","plot2","plotThree","plotThreeDisplay","titleOne","titleTwo","titleThree","warningMsg","msg","plot3","display_data","avg_month","month","num_month_0","name","moer_value","avg_day","day","num_day_0","avg_week","week","num_week_0"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Link, useHistory } from 'react-router-dom';\nimport Plot from 'react-plotly.js';\n\n// Loading spinner library\nimport HashLoader from \"react-spinners/HashLoader\";\nimport ClockLoader from \"react-spinners/ClockLoader\";\n\nimport { css } from \"@emotion/react\";\n\nimport './Explore.css'\n\nconst Explore = () => {\n\n    const [display, setDisplay] = useState(\"initial_page\");\n    const [graphOne, setGraphOne] = useState(null);\n    const [mappy, setMappy] = useState(null);\n    const [loadingInitial, setLoadingInitial] = useState(false);\n    const [loadingResult, setLoadingResult] = useState(false);\n    const [resultData, setResultData] = useState(undefined);\n    const [loadColor, setLoadColor] = useState(\"#8EB93B\");\n\n    const override = css`\n        display: block;\n        margin: 0 auto;\n        border-color: red;\n    `;\n\n    useEffect(() => {\n        setDisplay(\"initial_page\");\n        setLoadingInitial(true)\n        getData();\n    }, [])\n\n    \n    // Display the intial page, fetch the map/table's data and store it\n    const getData = () => {\n        setLoadingResult(true);\n        fetch(\"/all_index\").then(\n            res => res.json()\n\n        ).then(data => {\n            setGraphOne(JSON.parse(data.graphOne));\n            setMappy(JSON.parse(data.mappy));\n            setLoadingInitial(false);\n        })\n    }\n\n    // Onclick function when user submit the form\n    const getResult = () => {\n        // Change the page's display\n        setDisplay(\"result_page\");\n\n        // fetch the data using \"Post\" and the form, store it\n        fetch(\"/overview\", {\n            method: \"POST\", \n            body: new FormData(document.getElementById(\"explore_form\")),\n        }).then(\n            res => res.json()\n        ).then(data => {\n            setResultData(data)\n            setLoadingResult(false);\n        })\n        \n    }\n\n    // Create an initial variable to store the map plot\n    let plot = null\n\n    if (graphOne !== null) {\n        plot = <Plot data={graphOne.data} layout={graphOne.layout}/>\n    } \n    \n    // Disable the form from posting when hit \"submit\"\n    const handleSubmit = (event) => {\n        event.preventDefault()\n    }\n\n    // Create an initial variable to store the content\n    let content = null \n\n    // Page content will change based on the display's state\n    if (display === \"initial_page\") {\n        content = <div>\n            {!loadingInitial && \n            <div className=\"form-container\">\n                <p>Explore</p>\n\n                <form id=\"explore_form\" method=\"POST\" action=\"/overview\" onSubmit={handleSubmit}>\n                    <label htmlFor=\"data\">Details of a specific Azure region's WattTime balancing authority:</label>\n                \n                    <select className=\"form-control\" name=\"data\" id=\"data\">\n                        <option value=\"nada\">  </option>\n                        <option value=\"PJM Roanoke\">East US</option>\n                        <option value=\"PJM DC\">East US 2</option>\n                        <option value=\"PJM DC\">East US 2 EUAP</option>\n                        <option value=\"ERCOT San Antonio\">South Central US</option>\n                        <option value=\"PUD No 2 of Grant County\">West US 2</option>\n                        <option value=\"National Electricity Market (Australia)\">Australia Central</option>\n                        <option value=\"National Electricity Market (Australia)\">Australia Central 2</option>\n                        <option value=\"National Electricity Market (Australia)\">Australia East</option>\n                        <option value=\"National Electricity Market (Australia)\">Australia Southeast</option>\n                        <option value=\"Ireland\">North Europe</option>\n                        <option value=\"United Kingdom\">UK South</option>\n                        <option value=\"Netherlands\">West Europe</option>\n                        <option value=\"MISO Madison City\">Central US EUAP</option>\n                        <option value=\"MISO Madison City\">Central US</option>\n                        <option value=\"PJM Chicago\">North Central US</option>\n                        <option value=\"California ISO Northern\">West US</option>\n                        <option value=\"Independent Electricity System Operator (Ontario)\">Canada Central</option>\n                        <option value=\"France\">France South</option>\n                        <option value=\"France\">France Central</option>\n                        <option value=\"Hydro Quebec\">Canada East</option>\n                        <option value=\"Germany and Luxembourg\">Germany West Central</option>\n                        <option value=\"Germany and Luxembourg\">Germany North</option>\n                        <option value=\"PacifiCorp East\">West Central US</option>\n                        <option value=\"Arizona Public Service Co\">West US 3</option>\n                        <option value=\"Norway\">Norway West</option>\n                        <option value=\"Norway\">Norway East</option>\n                    </select>\n                    <br />\n\n                    <input \n                        className=\"findButton btn-success btn\" \n                        value=\"See Region Emission History\"\n                        type=\"submit\"\n                        onClick= {() => {\n                            getResult()\n                        }}\n                    />\n\n                </form>\n            </div>}\n\n            <div>\n                <br></br>\n            </div>\n\n            <div className=\"intensity-table\">\n\n            </div>\n\n            <div id=\"map-plot\">\n                {loadingInitial ? <div className=\"loading\">\n                    {/* Loading screen */}\n                    <div className=\"extra-space\">\n                        <br />\n                    </div> \n                \n                    <HashLoader color={loadColor} css={override} size={150}/>\n                    <p className=\"loading-title\">Hang in there!</p>\n                    <p className=\"loading-desc\">We are trying to load the page, this might take a while...</p>\n                    <p className=\"loading-desc\">Rome wasn't built in a day</p>\n                </div> : plot}\n            </div>\n        </div>\n    \n    // Result page content\n    } else if (display === \"result_page\") {\n\n        // Create the result content \n        let result = null;\n\n        // If the result data isn't null\n        if (resultData != null) {\n            // If the returned data is an error message\n            if (resultData.type === \"error\") {\n                // Create intial variables to store the error information\n                let errorMsg = resultData.errorMsg;\n                let errorCode = resultData.errorCode;\n    \n                // Return the error message display \n                result = <div>\n                    <p>{errorMsg}</p>\n                    <p>{errorCode}</p>\n                </div>\n\n            // Else display the result \n            } else {\n                if (resultData.type === \"region\" || resultData.type === \"region_bad_freq\") {\n                    // Create initial varaibles to store the needed information\n                    let plotOne = JSON.parse(resultData.plot1);\n                    let plotTwo = JSON.parse(resultData.plot2);\n                    let plotThree = null;\n                    let plotThreeDisplay = null;\n\n                    let titleOne = \"\";\n                    let titleTwo = \"\";\n                    let titleThree = \"\";\n                    let warningMsg = null;\n                    \n                    // Rename the title based on the returned data type's name\n                    if (resultData.type === \"region\" || resultData.type === \"region_2\") {\n                        titleOne = \"Last 24 Hours:\";\n                        titleTwo = \"Last 7 Days:\";\n\n                        if (resultData.type === \"region\") {\n                            titleThree = \"Last 30 Days:\"\n                        }\n                    } else {\n                        titleOne = \"Past Day:\";\n                        titleTwo = \"Past Week:\";\n                        warningMsg = <p><strong>***Notice***</strong> WattTime data frequency is greater than 5min. Frequency is {resultData.msg}s </p>\n\n                        if (resultData.type === \"region_bad_freq\") {\n                            titleThree = \"Past Month:\";\n                        }\n                    }\n\n                    // If the data returned type has 3 plots\n                    if (resultData.type === \"region\" || resultData.type === \"region_bad_freq\") {\n                        // Store the third plot's data and create a plot \n                        plotThree = JSON.parse(resultData.plot3)\n                        plotThreeDisplay = <div className=\"row\">\n                            <p>{titleThree}</p>\n                            <p>Average MOER: <span>{resultData.display_data.avg_month}<sup>lbs</sup>&frasl;<sub>MWh</sub></span></p>\n                            <p>Percentage of Time at 0g of Carbon: <span>{resultData.display_data.month}%</span></p>\n                            <p>Number of Times at 0g of Carbon: <span>{resultData.display_data.num_month_0}<sup></sup>&frasl;<sub>day</sub></span></p>\n                            <Plot data={plotThree.data} layout={plotThree.layout}/>\n                        </div>\n                    }\n\n                    result = <div>\n                        {/* Display the title */}\n                        <p>Balancing Authority: <span>{resultData.display_data.name}</span></p>\n                        <p>Real Time Emissions: <span>{resultData.display_data.moer_value}<sup>lbs</sup>&frasl;<sub>MWh</sub></span></p>\n                        <p>{warningMsg}</p>\n\n                        {/* Display plot one */}\n                        <div className=\"row\">\n                            <p>{titleOne}</p>\n                            <p>Average MOER: <span>{resultData.display_data.avg_day}<sup>lbs</sup>&frasl;<sub>MWh</sub></span></p>\n                            <p>Percentage of Time at 0g of Carbon: <span>{resultData.display_data.day}%</span></p>\n                            <p>Number of Times at 0g of Carbon: <span>{resultData.display_data.num_day_0}<sup></sup>&frasl;<sub>day</sub></span></p>\n                            <Plot data={plotOne.data} layout={plotOne.layout}/>\n                        </div>\n                        \n                        {/* Display plot two */}\n                        <div className=\"row\">\n                            <p>{titleTwo}</p>\n                            <p>Average MOER: <span>{resultData.display_data.avg_week}<sup>lbs</sup>&frasl;<sub>MWh</sub></span></p>\n                            <p>Percentage of Time at 0g of Carbon: <span>{resultData.display_data.week}%</span></p>\n                            <p>Number of Times at 0g of Carbon: <span>{resultData.display_data.num_week_0}<sup></sup>&frasl;<sub>day</sub></span></p>\n                            <Plot data={plotTwo.data} layout={plotTwo.layout}/>\n                        </div>\n\n                        {/* Display plot three */}\n                        {plotThreeDisplay}\n\n                    </div>\n                // In case something went wrong, display error message manually\n                } else {\n                    result = <div>\n                        <p>Sorry, somthing went wrong</p>\n                    </div>\n                }\n            }\n        }\n\n        content = <div>\n            {loadingResult ? <div className=\"loading\">\n                <div className=\"extra-space\">\n                    <br />\n                </div> \n            \n                <ClockLoader color={loadColor} css={override} size={150}/>\n                <p className=\"loading-title\">Trying to find the emission history</p>\n                <p className=\"loading-desc\">This might take a few seconds, a watched pot never boils!</p>\n            </div> : \n            <div> \n                {result}\n            </div>}\n        </div>\n    }\n\n\n    // Return the Explore page\n    return(    \n        <div>\n            {content}\n        </div>\n    );\n}\n\nexport default Explore; \n\n"]},"metadata":{},"sourceType":"module"}